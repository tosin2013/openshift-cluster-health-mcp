apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: mcp-server-reader
  labels:
    app.kubernetes.io/name: openshift-cluster-health-mcp
    app.kubernetes.io/component: rbac
rules:
# Read cluster health information
- apiGroups: [""]
  resources:
    - nodes
    - nodes/status
  verbs: ["get", "list", "watch"]

# Read pod information across all namespaces
- apiGroups: [""]
  resources:
    - pods
    - pods/status
    - pods/log
  verbs: ["get", "list", "watch"]

# Read namespace information
- apiGroups: [""]
  resources:
    - namespaces
  verbs: ["get", "list", "watch"]

# Read events for debugging
- apiGroups: [""]
  resources:
    - events
  verbs: ["get", "list", "watch"]

# Read services and endpoints
- apiGroups: [""]
  resources:
    - services
    - endpoints
  verbs: ["get", "list"]

# Read deployments and replicasets
- apiGroups: ["apps"]
  resources:
    - deployments
    - replicasets
    - statefulsets
    - daemonsets
  verbs: ["get", "list", "watch"]

# Read persistent volumes (for capacity planning)
- apiGroups: [""]
  resources:
    - persistentvolumes
    - persistentvolumeclaims
  verbs: ["get", "list"]
